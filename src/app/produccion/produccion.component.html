<div class="p-6 space-y-6">

  <h1 class="text-3xl font-bold text-gray-800 flex items-center gap-2 mb-6">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-8 h-8 text-blue-600">
      <path fill-rule="evenodd" d="M9.638 1.093a.75.75 0 0 1 .724 0l2 1.104a.75.75 0 1 1-.724 1.313L10 2.607l-1.638.903a.75.75 0 1 1-.724-1.313l2-1.104ZM5.403 4.287a.75.75 0 0 1-.295 1.019l-.805.444.805.444a.75.75 0 0 1-.724 1.314L3.5 7.02v.73a.75.75 0 0 1-1.5 0v-2a.75.75 0 0 1 .388-.657l1.996-1.1a.75.75 0 0 1 1.019.294Zm9.194 0a.75.75 0 0 1 1.02-.295l1.995 1.101A.75.75 0 0 1 18 5.75v2a.75.75 0 0 1-1.5 0v-.73l-.884.488a.75.75 0 1 1-.724-1.314l.806-.444-.806-.444a.75.75 0 0 1-.295-1.02ZM7.343 8.284a.75.75 0 0 1 1.02-.294L10 8.893l1.638-.903a.75.75 0 1 1 .724 1.313l-1.612.89v1.557a.75.75 0 0 1-1.5 0v-1.557l-1.612-.89a.75.75 0 0 1-.295-1.019ZM2.75 11.5a.75.75 0 0 1 .75.75v1.557l1.608.887a.75.75 0 0 1-.724 1.314l-1.996-1.101A.75.75 0 0 1 2 14.25v-2a.75.75 0 0 1 .75-.75Zm14.5 0a.75.75 0 0 1 .75.75v2a.75.75 0 0 1-.388.657l-1.996 1.1a.75.75 0 1 1-.724-1.313l1.608-.887V12.25a.75.75 0 0 1 .75-.75Zm-7.25 4a.75.75 0 0 1 .75.75v.73l.888-.49a.75.75 0 0 1 .724 1.313l-2 1.104a.75.75 0 0 1-.724 0l-2-1.104a.75.75 0 1 1 .724-1.313l.888.49v-.73a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd" />
    </svg>
    Producción
  </h1>

  <div *ngFor="let sistema of sistemas" class="bg-white p-6 rounded-lg shadow-md mb-6 relative">
    <h1 class="text-3xl font-bold text-gray-800 mb-4">{{ sistema.nombreSistema }}</h1>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
      <div class="md:col-span-1 border border-gray-300 p-4 flex justify-center items-center rounded-lg">
        <img src="Sensor.jpg" alt="Imagen del Sistema" class="max-w-full h-auto object-contain">
      </div>

      <div class="md:col-span-2">
        <h2 class="text-xl font-semibold text-gray-700 mb-3">Componentes Requeridos:</h2>
        <ul class="list-disc pl-5 space-y-2">
          <li *ngFor="let componente of sistema.componentes" class="text-gray-600">
            <span class="font-medium">{{ componente.nombreComponente }}</span>: Requerido {{ componente.cantidadRequerida }} | Disponible en inventario {{ componente.cantidadDisponible }}
            <span *ngIf="componente.cantidadDisponible < componente.cantidadRequerida" class="text-red-500 font-bold ml-2">(¡Insuficiente!)</span>
          </li>
        </ul>
      </div>
    </div>

    <div class="mt-6 pt-4 border-t border-gray-200 flex flex-col md:flex-row justify-between items-start md:items-center text-lg">
      <div class="text-gray-700 mb-2 md:mb-0">
        <span class="font-semibold">Disponible(s):</span> {{ sistema.sistemasDisponibles }}
      </div>
      <div class="text-gray-700 md:absolute md:left-1/2 md:-translate-x-1/2 md:bottom-4 md:text-center w-full md:w-auto">
        <span class="font-semibold">Costo de producción:</span> ${{ sistema.costoTotalProduccion | number:'1.2-2' }}
      </div>
    </div>

    <div class="absolute bottom-4 right-4 flex space-x-2">
      <button *ngIf="canProduce(sistema)"
              (click)="producir(sistema.idSistema)"
              class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-75 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
          <path fill-rule="evenodd" d="M4.606 12.97a.75.75 0 0 1-.134 1.051 2.494 2.494 0 0 0-.93 2.437 2.494 2.494 0 0 0 2.437-.93.75.75 0 1 1 1.186.918 3.995 3.995 0 0 1-4.482 1.332.75.75 0 0 1-.461-.461 3.994 3.994 0 0 1 1.332-4.482.75.75 0 0 1 1.052.134Z" clip-rule="evenodd" />
          <path fill-rule="evenodd" d="M5.752 12A13.07 13.07 0 0 0 8 14.248v4.002c0 .414.336.75.75.75a5 5 0 0 0 4.797-6.414 12.984 12.984 0 0 0 5.45-10.848.75.75 0 0 0-.735-.735 12.984 12.984 0 0 0-10.849 5.45A5 5 0 0 0 1 11.25c.001.414.337.75.751.75h4.002ZM13 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" clip-rule="evenodd" />
        </svg>
        Producir
      </button>

      <button *ngIf="needsPieces(sistema)"
              (click)="solicitarPiezas()"
              class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
          <path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" clip-rule="evenodd" />
        </svg>
        Solicitar Piezas
      </button>
    </div>
  </div>
</div>
